<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setup Pipeline | Django Cassiopeia</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="Django Integration of the League of Legends API framework Cassiopeia and a lot enhanced features.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/django-cassiopeia/assets/css/0.styles.80e97fbf.css" as="style"><link rel="preload" href="/django-cassiopeia/assets/js/app.e2028a0d.js" as="script"><link rel="preload" href="/django-cassiopeia/assets/js/2.72cfa8d8.js" as="script"><link rel="preload" href="/django-cassiopeia/assets/js/15.da7c6a00.js" as="script"><link rel="prefetch" href="/django-cassiopeia/assets/js/10.51a5224f.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/11.d1d88b11.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/12.76792aa1.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/13.3f41df8f.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/14.9a10fede.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/16.09e2ce7a.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/17.441f8a02.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/3.62a12f98.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/4.45587ab2.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/5.c44a7016.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/6.51e4d4fc.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/7.43067d64.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/8.7dd4b9da.js"><link rel="prefetch" href="/django-cassiopeia/assets/js/9.cff73975.js">
    <link rel="stylesheet" href="/django-cassiopeia/assets/css/0.styles.80e97fbf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/django-cassiopeia/" class="home-link router-link-active"><!----> <span class="site-name">Django Cassiopeia</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/django-cassiopeia/documentation/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="https://github.com/paaksing/django-cassiopeia" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/django-cassiopeia/documentation/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="https://github.com/paaksing/django-cassiopeia" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/django-cassiopeia/documentation/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/django-cassiopeia/documentation/examples.html" class="sidebar-link">Usage</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Configuration</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/django-cassiopeia/documentation/common.html" class="sidebar-link">Setup Django</a></li><li><a href="/django-cassiopeia/documentation/riotapi.html" class="sidebar-link">Setup Riot API</a></li><li><a href="/django-cassiopeia/documentation/pipeline.html" aria-current="page" class="active sidebar-link">Setup Pipeline</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/django-cassiopeia/documentation/pipeline.html#set-your-pipeline-settings" class="sidebar-link">Set your pipeline settings</a></li><li class="sidebar-sub-header"><a href="/django-cassiopeia/documentation/pipeline.html#data-stores" class="sidebar-link">Data Stores</a></li><li class="sidebar-sub-header"><a href="/django-cassiopeia/documentation/pipeline.html#example-pipeline-settings" class="sidebar-link">Example pipeline settings</a></li></ul></li><li><a href="/django-cassiopeia/documentation/plugin.html" class="sidebar-link">Setup Plugin</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>About</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/django-cassiopeia/documentation/github.html" class="sidebar-link">Support and Contributions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Migration</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/django-cassiopeia/documentation/migrating1to2.html" class="sidebar-link">Django Cassiopeia 1.1 to 2.0</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="setup-pipeline"><a href="#setup-pipeline" class="header-anchor">#</a> Setup Pipeline</h1> <p>Set up your pipeline settings, below is a quote from cassiopeia's <a href="http://cassiopeia.readthedocs.org/en/latest/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> explaning how cassiopeia's data pipeline works:</p> <blockquote><p>The data pipeline is the series of caches, databases, and data sources (such as the Riot API) that both provide and store data. Data sources provide data, while data sinks store data; we call both of these “data stores”. Some parts of the data pipeline are only data sources (for example, the Riot API), while others are both data sources and data sinks (for example, caches and databases). The data pipeline is a list of data stores, where the order the data stores specifies how data is pulled and stored (see the next paragraph). Usually faster data stores go at the beginning of the data pipeline.</p></blockquote> <blockquote><p>When data is queried, a query dictionary is constructed containing the information needed to uniquely identify an object in a data source (e.g. a region and summoner.id are required when querying for Summoner objects). This query is passed up the data pipeline through the data sources, and at each data source the data pipeline asks if that source can supply the requested object. If the source can supply the object (for example, if the object is in the database, or if the Riot API can send the object/data), it is returned. If the source does not supply the object, the next data source in the pipeline is queried. If no data source can provide an object for the query, a datapipelines.NotFoundError is thrown.</p></blockquote> <blockquote><p>After an object is returned by a data source, the object gets passed back down the pipeline. Any data sinks along the way store the object that was returned by the data source. In this way, the cache (which should be at the front of the data pipeline) will store any object that a database or the Riot API returned.</p></blockquote> <p>The data pipeline used here is the same, but with the following changes:</p> <ul><li>Lot shorter syntax for expirations settings.</li> <li>You can Log events that happens on the datastore.</li> <li>A safe check lock is in place.</li> <li>More datastores.</li> <li>Better control.</li></ul> <h2 id="set-your-pipeline-settings"><a href="#set-your-pipeline-settings" class="header-anchor">#</a> Set your pipeline settings</h2> <p>File: <code>settings.py</code></p> <ul><li><p>Settings Variable: <code>CASSIOPEIA_PIPELINE</code></p></li> <li><p>Usage: Define the structure of the pipeline.</p></li> <li><p>Accepts: Dict</p> <blockquote><p>keys: Data Stores module name.</p></blockquote> <blockquote><p>values: dict of arguments or list of dict of arguments depending on the datastore specified.</p></blockquote></li> <li><p>Default: No default, this settings is required otherwise an error is raised.</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>A list of datastores is <a href="#data-stores">later on the page</a>.</p></div> <h3 id="arguments"><a href="#arguments" class="header-anchor">#</a> Arguments</h3> <p>The arguments accepted varies from the datastore used.</p> <ul><li><p><code>&quot;ALIAS&quot;</code>: str &gt; The name identifying the datastore if the datastore accepts multiple instances.</p></li> <li><p><code>&quot;SAFE_CHECK&quot;</code>: bool &gt; Raises an exception if some arguments are not optimal or safe to use, you can disable it by setting it to <code>False</code>, its not recommended unless you have a clear reason on doing it.</p></li> <li><p><code>&quot;LOGS_ENABLED&quot;</code>: bool &gt; Enables or disable logs for datastore events.</p></li> <li><p><code>&quot;MAX_ENTRIES&quot;</code>: int &gt; The maximum number of entries allowed in the datastore before old values are deleted, this is intended for datastore that cannot expire objects automatically on runtime.</p></li> <li><p><code>&quot;CULL_FRECUENCY&quot;</code>: int &gt; The fraction of entries that are culled when <code>&quot;MAX_ENTRIES&quot;</code> is reached. The actual ratio is 1 / n, where n is your value, so by setting it to 2 will cull half the entries when <code>&quot;MAX_ENTRIES&quot;</code> is reached.</p></li> <li><p><code>&quot;EXPIRATIONS_MAP&quot;</code>: dict &gt; Object specifying the expirations (if the datastore is a cache) for each cassiopeia object, some datastores supports <code>cassiopeia.core</code> objects, and others supports <code>cassiopeia.dto</code> objects. Most time you would combine them to give you better performance. Unlike <code>&quot;expirations&quot;</code> settings in cassiopeia, here you're gonna deal with a lot shorter version of it. Example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> datetime <span class="token keyword">import</span> timedelta <span class="token keyword">as</span> td
<span class="token comment">#... more settings</span>
<span class="token string">&quot;EXPIRATIONS_MAP&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    td<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cr&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pi+&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    td<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;rl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ss+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mp+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ls+&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*+&quot;</span><span class="token punctuation">]</span>   <span class="token comment"># All remaining core objects</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Below is a table with the abbrs for each object and type, they follow a similar convention but not limited to: it takes the inicials of the object's name, a <code>+</code> at the end means it contains a group (e.g. <code>Item</code> and <code>Items</code> -&gt; <code>&quot;i&quot;</code> and <code>&quot;i+&quot;</code>), a <code>-</code> at the end means it is of type <code>dto</code>, <code>+-</code> at the end means it is a <code>dto</code> that contains a group, <code>**</code> for all the remaining objects, <code>*+</code> means all the remaining <code>core</code> objects, and <code>*-</code> for all the remaining <code>dto</code> objects. There are some exceptions with objects that has same inicials (e.g. <code>Realms</code>(<code>rl</code>) and <code>Rune</code>(<code>r</code>)).</p> <table><thead><tr><th>Abbr</th> <th>Object</th> <th>type</th></tr></thead> <tbody><tr><td><code>&quot;cr&quot;</code></td> <td><code>ChampionRotationData</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;rl&quot;</code></td> <td><code>Realms</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;v&quot;</code></td> <td><code>Versions</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;c&quot;</code></td> <td><code>Champion</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;c+&quot;</code></td> <td><code>Champions</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;r&quot;</code></td> <td><code>Rune</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;r+&quot;</code></td> <td><code>Runes</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;i&quot;</code></td> <td><code>Item</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;i+&quot;</code></td> <td><code>Items</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;ss&quot;</code></td> <td><code>SummonerSpell</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;ss+&quot;</code></td> <td><code>SummonerSpells</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;mp&quot;</code></td> <td><code>Map</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;mp+&quot;</code></td> <td><code>Maps</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;pi&quot;</code></td> <td><code>ProfileIcon</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;pi+&quot;</code></td> <td><code>ProfileIcons</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;ls&quot;</code></td> <td><code>Locales</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;ls+&quot;</code></td> <td><code>LanguageStrings</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;cm&quot;</code></td> <td><code>ChampionMastery</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;cm+&quot;</code></td> <td><code>ChampionMasteries</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;lse&quot;</code></td> <td><code>LeagueSummonerEntries</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;l&quot;</code></td> <td><code>League</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;cl&quot;</code></td> <td><code>ChallengerLeague</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;gl&quot;</code></td> <td><code>GrandmasterLeague</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;ml&quot;</code></td> <td><code>MasterLeague</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;m&quot;</code></td> <td><code>Match</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;t&quot;</code></td> <td><code>Timeline</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;s&quot;</code></td> <td><code>Summoner</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;shs&quot;</code></td> <td><code>ShardStatus</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;cg&quot;</code></td> <td><code>CurrentMatch</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;fg&quot;</code></td> <td><code>FeaturedMatches</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;rl-&quot;</code></td> <td><code>RealmDto</code></td> <td><code>core</code></td></tr> <tr><td><code>&quot;v-&quot;</code></td> <td><code>VersionListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;c-&quot;</code></td> <td><code>ChampionDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;c+-&quot;</code></td> <td><code>ChampionListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;r-&quot;</code></td> <td><code>RuneDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;r+-&quot;</code></td> <td><code>RuneListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;i-&quot;</code></td> <td><code>ItemDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;i+-&quot;</code></td> <td><code>ItemListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;ss-&quot;</code></td> <td><code>SummonerSpellDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;ss+-&quot;</code></td> <td><code>SummonerSpellListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;mp-&quot;</code></td> <td><code>MapDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;mp+-&quot;</code></td> <td><code>MapListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;pi-&quot;</code></td> <td><code>ProfileIconDetailsDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;pi+-&quot;</code></td> <td><code>ProfileIconDataDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;ls-&quot;</code></td> <td><code>LanguagesDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;ls+-&quot;</code></td> <td><code>LanguageStringsDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;cr-&quot;</code></td> <td><code>ChampionRotationDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;cm-&quot;</code></td> <td><code>ChampionMasteryDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;cm+-&quot;</code></td> <td><code>ChampionMasteryListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;cl-&quot;</code></td> <td><code>ChallengerLeagueListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;gl-&quot;</code></td> <td><code>GrandmasterLeagueListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;ml-&quot;</code></td> <td><code>MasterLeagueListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;m-&quot;</code></td> <td><code>MatchDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;t-&quot;</code></td> <td><code>TimelineDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;s-&quot;</code></td> <td><code>SummonerDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;shs-&quot;</code></td> <td><code>ShardStatusDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;cg-&quot;</code></td> <td><code>CurrentGameInfoDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;fg-&quot;</code></td> <td><code>FeaturedGamesDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;p-&quot;</code></td> <td><code>PatchListDto</code></td> <td><code>dto</code></td></tr> <tr><td><code>&quot;*-&quot;</code></td> <td>Remaining of all <code>dto</code> objects</td> <td></td></tr> <tr><td><code>&quot;*+&quot;</code></td> <td>Remaining of all <code>core</code> objects</td> <td></td></tr> <tr><td><code>&quot;**&quot;</code></td> <td>Remaining of all objects</td> <td></td></tr></tbody></table></li></ul> <h2 id="data-stores"><a href="#data-stores" class="header-anchor">#</a> Data Stores</h2> <p>A list of datastores that comes with Django Cassiopeia.</p> <h3 id="omnistone"><a href="#omnistone" class="header-anchor">#</a> Omnistone</h3> <p><strong><em>Added in 2.0:</em></strong> Due to some memory issues (specially that rows were not expiring correctly) caused by cassiopeia's <code>Cache</code> datastore during beta test, <code>Omnistone</code> is a refined version of <code>Cache</code> that fixes this issue. The issues were known before the first test release, it was ignored due to the existence of Django's Cache which was supposed to be its replacement, but the fact that Django's Cache cannot store <code>core</code> objects were slowing down significantly the performance time, and ... <code>Omnistone</code> is here lol.</p> <ul><li>Description: This is a cache as a python object that lives on memory ONLY on server runtime, speeding up performance significantly by temporary caching <code>cassiopeia.core</code> objects, thus avoid using transformers and extra pulls. It will automatically cull the cache when a maximum entries provided in arguments is hit. This should be the first datastore in the pipeline.</li> <li>Purpose: Fixing memory issues caused by <code>Cache</code> while keeping performance.</li> <li>Supports multiple instances: No.</li> <li>Object type supported: <code>cassiopeia.core</code></li> <li>Recommended placement on pipeline: The very first.</li></ul> <table><thead><tr><th>Arguments</th> <th>Default</th></tr></thead> <tbody><tr><td><code>&quot;MAX_ENTRIES&quot;</code></td> <td>6000</td></tr> <tr><td><code>&quot;CULL_FRECUENCY&quot;</code></td> <td>2</td></tr> <tr><td><code>&quot;SAFE_CHECK&quot;</code></td> <td><code>True</code></td></tr> <tr><td><code>&quot;LOGS_ENABLED&quot;</code></td> <td><code>False</code></td></tr> <tr><td><code>&quot;EXPIRATIONS_MAP&quot;</code></td> <td><code>{ td(hours=3): [&quot;c&quot;, &quot;c+&quot;, &quot;r&quot;, &quot;r+&quot;, &quot;cr&quot;, &quot;i&quot;, &quot;i+&quot;, &quot;pi&quot;, &quot;pi+&quot;], td(hours=6): [&quot;rl&quot;, &quot;v&quot;, &quot;ss&quot;, &quot;ss+&quot;, &quot;mp&quot;, &quot;mp+&quot;, &quot;ls&quot;, &quot;ls+&quot;], 0: [&quot;*+&quot;] }</code></td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">INFO</p> <p>This datastore will shut down along with the Django's server, so it is not recommended to cache static data such as <code>Match</code>, <code>Timeline</code> or <code>Summoner</code>, which might actually impact a bit in performance.</p> <p>The preferable way to use this datastore is to combine with datastore that doesn't shut down with server (Database, Filebased, in Memory), so the flow would be like follow: look at <code>core</code> in <code>Omnistone</code> and not found, look at <code>dto</code> in <code>DjangoCache</code> and found, now populate <code>Omnistone</code> using <code>core</code>, the next time being pulled will pull the <code>core</code> in <code>Omnistone</code> which is aprox. 5x faster.</p></div> <h3 id="djangocache"><a href="#djangocache" class="header-anchor">#</a> DjangoCache</h3> <ul><li>Description: This datastore uses the Django's low-level cache API, that lets you cache <code>cassiopeia.dto</code> objects to any cache backend that works on Django.</li> <li>Purpose: Add the possibility to use the numerous flexible and production-tested caches available.</li> <li>Supports multiple instances: Yes, so its argument will take a list of dicts.</li> <li>Object type supported: <code>cassiopeia.dto</code></li> <li>Recommended placement on pipeline: After <code>Omnistone</code>.</li></ul> <table><thead><tr><th>Arguments</th> <th>Default</th></tr></thead> <tbody><tr><td><code>&quot;ALIAS&quot;</code></td> <td>No default, required otherwise raise error.</td></tr> <tr><td><code>&quot;SAFE_CHECK&quot;</code></td> <td><code>True</code></td></tr> <tr><td><code>&quot;LOGS_ENABLED&quot;</code></td> <td><code>False</code></td></tr> <tr><td><code>&quot;EXPIRATIONS_MAP&quot;</code></td> <td><code>{ td(hours=6): [&quot;rl-&quot;, &quot;v-&quot;, &quot;cr-&quot;, &quot;cm-&quot;, &quot;cm+-&quot;, &quot;cl-&quot;, &quot;gl-&quot;, &quot;ml-&quot;], td(days=7): [&quot;mp-&quot;, &quot;mp+-&quot;, &quot;ls-&quot;, &quot;ls+-&quot;, &quot;t-&quot;, 'm-'], td(days=1): [&quot;c-&quot;, &quot;c+-&quot;, &quot;r-&quot;, &quot;r+-&quot;, &quot;i-&quot;, &quot;i+-&quot;, &quot;ss-&quot;, &quot;ss+-&quot;, &quot;pi-&quot;, &quot;pi+-&quot;, &quot;p-&quot;], td(minutes=15): [&quot;cg-&quot;, &quot;fg-&quot;, &quot;shs-&quot;, &quot;s-&quot;], 0: [&quot;*-&quot;] }</code></td></tr></tbody></table> <p>A Django Caches settings is needed, for more information please read Django's official Cache Framework <a href="https://docs.djangoproject.com/en/dev/topics/cache/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, for example:</p> <p><strong>Highlighted lines are cache's name, these are the <code>&quot;ALIAS&quot;</code> used when you define in your pipeline's settings.</strong></p> <div class="language-python extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-python"><code>CACHES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment"># Do not use it for ALIAS</span>
        <span class="token string">'BACKEND'</span><span class="token punctuation">:</span> <span class="token string">'django.core.cache.backends.memcached.MemcachedCache'</span><span class="token punctuation">,</span>
        <span class="token string">'LOCATION'</span><span class="token punctuation">:</span> <span class="token string">'127.0.0.1:11211'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;cass-redis&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;BACKEND&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;django_redis.cache.RedisCache&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;LOCATION&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;redis://127.0.0.1:6379/1&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;CLIENT_CLASS&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;django_redis.client.DefaultClient&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;PICKLE_VERSION&quot;</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token string">&quot;COMPRESSOR&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;django_redis.compressors.lz4.Lz4Compressor&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'filebased'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'BACKEND'</span><span class="token punctuation">:</span> <span class="token string">'django.core.cache.backends.filebased.FileBasedCache'</span><span class="token punctuation">,</span>
        <span class="token string">'LOCATION'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'filebased-cache'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'MAX_ENTRIES'</span><span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="custom-block details"><summary>Click to see details of this code.</summary> <p>Here we set up django_redis cache backend that uses lz4 compression before saving it to redis database, and a filebased cache that handles a maximum of 10000 files before culling.</p></details> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You should ALWAYS leave <code>default</code> cache for handling caching for your app.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Use this datastore combined with <code>Omnistone</code> for better performance.</li> <li><code>MatchHistory</code> is bugged on the API side, thus to avoid unexpected results, this is not sinked into this datastore. Match Histories is in constant change anyways, to prevent abuse in client side you can set a limiter or throttling in DRF.</li></ul></div> <h3 id="ddragon"><a href="#ddragon" class="header-anchor">#</a> DDragon</h3> <ul><li>Description: This is a pure datasource that serves data from the League of Legends' Data Dragon.</li> <li>Supports multiple instances: No.</li> <li>Object type supported: <code>cassiopeia.dto</code></li> <li>Recommended placement on pipeline: After any cache and before <code>RiotAPI</code>.</li></ul> <table><thead><tr><th>Arguments</th> <th>Default</th></tr></thead> <tbody></tbody></table> <p>Does not accept any arguments.</p> <h3 id="riotapi"><a href="#riotapi" class="header-anchor">#</a> RiotAPI</h3> <ul><li>Description: This is a pure datasource that serves League of Legends data from the Riot API.</li> <li>Supports multiple instances: No.</li> <li>Object type supported: <code>cassiopeia.dto</code></li> <li>Recommended placement on pipeline: The very end.</li></ul> <table><thead><tr><th>Arguments</th> <th>Default</th></tr></thead> <tbody></tbody></table> <p>Does not accept any arguments.</p> <p><em>Unlike cassiopeia, you already set these arguments in <code>&quot;CASSIOPEIA_RIOT_API_KEY&quot;</code>, <code>&quot;CASSIOPEIA_LIMITING_SHARE&quot;</code> and <code>&quot;CASSIOPEIA_API_ERROR_HANDLING&quot;</code>.</em></p> <h3 id="cache-deprecated"><a href="#cache-deprecated" class="header-anchor">#</a> Cache (Deprecated)</h3> <ul><li>Description: Original Cache system used and using by cassiopeia.</li> <li>Supports multiple instances: No.</li> <li>Object type supported: <code>cassiopeia.core</code></li> <li>Recommended placement on pipeline: The very first.</li></ul> <table><thead><tr><th>Arguments</th> <th>Default</th></tr></thead> <tbody><tr><td><code>&quot;EXPIRATIONS_MAP&quot;</code></td> <td>The default expirations can be found in cassiopeia's <a href="https://cassiopeia.readthedocs.io/en/latest/datapipeline.html#in-memory-cache" target="_blank" rel="noopener noreferrer">documentations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You should not use this datastore unless a reason is given (to yourself).
It does not automatically delete objects after it is expired, which might cause memory issues in some cases.
The refined version of this datastore is <a href="#omnistone"><code>Omnistone</code></a>.</p></div> <h2 id="example-pipeline-settings"><a href="#example-pipeline-settings" class="header-anchor">#</a> Example pipeline settings</h2> <div class="language-python extra-class"><pre class="language-python"><code>CASSIOPEIA_PIPELINE <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;Omnistone&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;EXPIRATIONS_MAP&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
            td<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cr&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pi+&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            td<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;rl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ss+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mp+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ls+&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token number">0</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*+&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;MAX_ENTRIES&quot;</span><span class="token punctuation">:</span> <span class="token number">6000</span><span class="token punctuation">,</span>
        <span class="token string">&quot;CULL_FRECUENCY&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;SAFE_CHECK&quot;</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
        <span class="token string">&quot;LOGS_ENABLED&quot;</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DjangoCache&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;ALIAS&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;cass-redis&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;EXPIRATIONS_MAP&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                td<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;rl-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cr-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cm-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cm+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cl-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gl-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ml-&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                td<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;mp-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mp+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ls-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ls+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;t-&quot;</span><span class="token punctuation">,</span> <span class="token string">'m-'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                td<span class="token punctuation">(</span>minutes<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;cg-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fg-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shs-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;s-&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token number">0</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*-&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;SAFE_CHECK&quot;</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token string">&quot;LOGS_ENABLED&quot;</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;ALIAS&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;filebased&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;EXPIRATIONS_MAP&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                td<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;c-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ss-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ss+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pi-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pi+-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p-&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token number">0</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*-&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;SAFE_CHECK&quot;</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token string">&quot;LOGS_ENABLED&quot;</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DDragon&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;RiotAPI&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>During development, you can set <code>&quot;LOGS_ENABLED&quot;</code> to <code>True</code> for debugging or to see if your objects are caching the way you expected, if it is not, make sure to double check the spelling (or submit an issue on github).</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/django-cassiopeia/documentation/riotapi.html" class="prev">
        Setup Riot API
      </a></span> <span class="next"><a href="/django-cassiopeia/documentation/plugin.html">
        Setup Plugin
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/django-cassiopeia/assets/js/app.e2028a0d.js" defer></script><script src="/django-cassiopeia/assets/js/2.72cfa8d8.js" defer></script><script src="/django-cassiopeia/assets/js/15.da7c6a00.js" defer></script>
  </body>
</html>
